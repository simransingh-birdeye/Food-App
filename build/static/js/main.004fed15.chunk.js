(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{17:function(e,t,n){e.exports={button:"HeaderButton_button__1fWLN",icon:"HeaderButton_icon__2FCEp",badge:"HeaderButton_badge__2mVK4",bump:"HeaderButton_bump__2u06y"}},18:function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__LvhoP",summary:"CartItem_summary__3_jA-",price:"CartItem_price__1fDAl",amount:"CartItem_amount__1hCfR",actions:"CartItem_actions__SCDbH"}},19:function(e,t,n){e.exports={"cart-items":"Cart_cart-items__1-bRE",total:"Cart_total__3jWWV",actions:"Cart_actions__1Oskv","button--alt":"Cart_button--alt__eo_4U",button:"Cart_button__3lXFL"}},27:function(e,t,n){e.exports={meal:"MealItem_meal__2HzwU",description:"MealItem_description__2HeJh",price:"MealItem_price__1WlGz"}},28:function(e,t,n){e.exports={backdrop:"Modal_backdrop__nuObw",modal:"Modal_modal__1IaeI","slide-down":"Modal_slide-down__1uW2Q"}},29:function(e,t,n){e.exports={orderAction:"Order_orderAction__3gQvi","button--alt":"Order_button--alt__e-wrf",orderheading:"Order_orderheading__1SwKe"}},35:function(e,t,n){e.exports={header:"Header_header__1Br6c","main-image":"Header_main-image__2dyiL"}},49:function(e,t,n){e.exports={summary:"MealsSummary_summary__2QYO9"}},50:function(e,t,n){e.exports={input:"Input_input__1laQy"}},51:function(e,t,n){e.exports={form:"MealItemForm_form__1qkZm"}},52:function(e,t,n){e.exports={meals:"AvailableMeals_meals__2rwIF","meals-appear":"AvailableMeals_meals-appear__ZTpGQ"}},53:function(e,t,n){e.exports={card:"Card_card__1f9SV"}},68:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(46),r=n.n(a),c=n(8),i=(n(68),n(11)),o=n(2),s=n.n(o),u=n(35),d=n.n(u),l=n.p+"static/media/meals.2971f633.jpeg",m=n(17),j=n.n(m),b=n(0),O=function(){return Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(b.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})};var f=function(e){return Object(b.jsxs)("button",{className:e.btnClasses,onClick:e.onClick,children:[Object(b.jsx)("span",{className:j.a.icon,children:Object(b.jsx)(O,{})}),Object(b.jsx)("span",{children:"Your Cart"}),Object(b.jsx)("span",{className:j.a.badge,children:e.numberOfCartItems})]})};var p=function(e){var t=Object(o.useState)(!0),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.c)((function(e){return e.cartReducer.items})),u=s.reduce((function(e,t){return e+t.amount}),0),d="".concat(j.a.button," ").concat(a?j.a.bump:"");return Object(o.useEffect)((function(){if(0!==s.length){r(!0);var e=setTimeout((function(){r(!1)}),300);return function(){clearTimeout(e)}}}),[s]),Object(b.jsx)(f,{onClick:e.onClick,btnClasses:d,numberOfCartItems:u})};var x=function(e){return Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsxs)("header",{className:d.a.header,children:[Object(b.jsx)("h1",{children:"Food App"}),Object(b.jsx)(p,{onClick:e.onShowCart})]}),Object(b.jsx)("div",{className:d.a["main-image"],children:Object(b.jsx)("img",{src:l,alt:"delicious food"})})]})},h=n(49),_=n.n(h),v=function(){return Object(b.jsxs)("section",{className:_.a.summary,children:[Object(b.jsx)("h2",{children:"Delicious Food, Delivered To You"}),Object(b.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(b.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})},C=n(12),I=n(6),A=n(26),y=Object(A.b)({name:"Cart",initialState:{foodItems:[],items:[],totalAmount:0},reducers:{get:function(e,t){e.foodItems=t.payload},add:function(e,t){var n,a=e.items.findIndex((function(e){return e.id===t.payload.id})),r=e.items[a];if(r){var c=Object(I.a)(Object(I.a)({},r),{},{amount:r.amount+t.payload.amount});(n=Object(C.a)(e.items))[a]=c}else n=e.items.concat(t.payload);var i=e.totalAmount+t.payload.price*t.payload.amount;e.totalAmount=i,e.items=n},remove:function(e,t){var n,a=t.payload.cartItems,r=a.findIndex((function(e){return e.id===t.payload.id})),c=a[r],i=e.totalAmount-c.price;if(1===c.amount)n=a.filter((function(e){return e.id!==t.payload.id}));else{var o=Object(I.a)(Object(I.a)({},c),{},{amount:c.amount-1});(n=Object(C.a)(a))[r]=o}e.totalAmount=i,e.items=n}}}),H=y.actions,N=H.get,g=H.add,w=H.remove,k=y.reducer,R=n(27),F=n.n(R),M=n(50),S=n.n(M),E=s.a.forwardRef((function(e,t){return Object(b.jsxs)("div",{className:S.a.input,children:[Object(b.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(b.jsx)("input",Object(I.a)({ref:t},e.input))]})})),T=n(51),D=n.n(T);var B=function(e){return Object(b.jsxs)("form",{className:D.a.form,onSubmit:e.submitHandler,children:[Object(b.jsx)(E,{label:"Amount",ref:e.amountInputRef,input:{type:"number",id:"amount_"+e.id,min:"1",max:"5",step:"1",defaultValue:"1"}}),Object(b.jsx)("button",{type:"submit",children:"+ Add"}),!e.amountIsValid&&Object(b.jsx)("p",{children:"Please enter a valid amount (1-5)"})]})};var V=function(e){var t=Object(o.useState)(!0),n=Object(i.a)(t,2),a=n[0],r=n[1],c=Object(o.useRef)();return Object(b.jsx)(B,{submitHandler:function(t){t.preventDefault();var n=+c.current.value;n<1||n>5?r(!1):e.onAddToCart(n)},amountInputRef:c,id:e.id,amountIsValid:a})};var L=function(e){return Object(b.jsxs)("li",{className:F.a.meal,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:e.mealname}),Object(b.jsx)("div",{className:F.a.description,children:e.mealdescription}),Object(b.jsx)("div",{className:F.a.price,children:e.price})]}),Object(b.jsx)("div",{children:Object(b.jsx)(V,{id:e.id,onAddToCart:e.addToCartHandler})})]})};var P=function(e){var t="$".concat(e.mealprice.toFixed(2)),n=Object(c.b)();return Object(b.jsx)(L,{mealname:e.mealname,mealdescription:e.mealdescription,price:t,id:e.id,addToCartHandler:function(t){n(g({id:e.id,name:e.mealname,amount:t,price:e.mealprice}))}})},z=n(52),Q=n.n(z),W=n(53),G=n.n(W);var J=function(e){return Object(b.jsx)("div",{className:G.a.card,children:e.children})};var Y=function(e){return Object(b.jsx)("section",{className:Q.a.meals,children:Object(b.jsx)(J,{children:Object(b.jsx)("ul",{children:e.mealsList})})})},$="GET_FOOD_ITEMS",q=function(){var e=Object(c.c)((function(e){return e.cartReducer.foodItems})),t=Object(c.b)();Object(o.useEffect)((function(){t({type:$})}),[]);var n=e.map((function(e){return Object(b.jsx)(P,{mealname:e.name,mealdescription:e.description,mealprice:e.price,id:e.id},e.id)}));return Object(b.jsx)(Y,{mealsList:n})};var K=function(){return Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsx)(v,{}),Object(b.jsx)(q,{})]})},U=n(18),Z=n.n(U),X=function(e){var t="$".concat(e.price.toFixed(2));return Object(b.jsxs)("li",{className:Z.a["cart-item"],children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:e.name}),Object(b.jsxs)("div",{className:Z.a.summary,children:[Object(b.jsx)("span",{className:Z.a.price,children:t}),Object(b.jsxs)("span",{className:Z.a.amount,children:["x ",e.amount]})]})]}),Object(b.jsxs)("div",{className:Z.a.actions,children:[Object(b.jsx)("button",{onClick:e.onRemove,children:"\u2212"}),Object(b.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},ee=n(15),te=n.n(ee),ne=n(28),ae=n.n(ne),re=function(e){return Object(b.jsx)("div",{className:ae.a.backdrop,onClick:e.onClose})},ce=function(e){return Object(b.jsx)("div",{className:ae.a.modal,children:Object(b.jsx)("div",{className:ae.a.content,children:e.children})})},ie=document.getElementById("overlays");var oe=function(e){return Object(b.jsxs)(s.a.Fragment,{children:[te.a.createPortal(Object(b.jsx)(re,{onClose:e.onClose}),ie),te.a.createPortal(Object(b.jsx)(ce,{children:e.children}),ie)]})},se=n(19),ue=n.n(se);var de=function(e){var t=Object(b.jsx)("ul",{className:ue.a["cart-items"],children:e.items.map((function(t){return Object(b.jsx)(X,{name:t.name,amount:t.amount,price:t.price,onRemove:e.cartItemRemoveHandler.bind(null,t.id),onAdd:e.cartItemAddHandler.bind(null,t)},t.id)}))});return Object(b.jsxs)(oe,{onClose:e.onHideCart,children:[t,Object(b.jsxs)("div",{className:ue.a.total,children:[Object(b.jsx)("span",{children:"Total Amount"}),Object(b.jsx)("span",{children:e.totalAmount})]}),Object(b.jsxs)("div",{className:ue.a.actions,children:[Object(b.jsx)("button",{className:ue.a["button--alt"],onClick:e.onHideCart,children:"Close"}),e.hasItem&&Object(b.jsx)("button",{className:ue.a.button,onClick:e.orderHandler,children:"Order"})]})]})};var le=function(e){var t=Object(c.c)((function(e){return e.cartReducer.items})),n=Object(c.c)((function(e){return e.cartReducer.totalAmount})),a=t.length>0,r="$".concat(n.toFixed(2)),i=Object(c.b)();return Object(b.jsx)(de,{items:t,cartItemRemoveHandler:function(e){i(w({id:e,cartItems:t}))},cartItemAddHandler:function(e){i(g(Object(I.a)(Object(I.a)({},e),{},{amount:1})))},onHideCart:e.onHideCart,orderHandler:function(){e.onHideCart(),e.onShowOrder()},totalAmount:r,hasItem:a})},me=s.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){}}),je={items:[],totalAmount:0},be=function(e,t){if("ADD"===t.type){var n,a=e.items.findIndex((function(e){return e.id===t.item.id})),r=e.items[a];if(r){var c=Object(I.a)(Object(I.a)({},r),{},{amount:r.amount+t.item.amount});(n=Object(C.a)(e.items))[a]=c}else n=e.items.concat(t.item);return{items:n,totalAmount:e.totalAmount+t.item.price*t.item.amount}}if("REMOVE"===t.type){var i,o=e.items.findIndex((function(e){return e.id===t.id})),s=e.items[o],u=e.totalAmount-s.price;if(1===s.amount)i=e.items.filter((function(e){return e.id!==t.id}));else{var d=Object(I.a)(Object(I.a)({},s),{},{amount:s.amount-1});(i=Object(C.a)(e.items))[o]=d}return{items:i,totalAmount:u}}return je};var Oe=function(e){var t=Object(o.useReducer)(be,je),n=Object(i.a)(t,2),a=n[0],r=n[1],c={items:a.items,totalAmount:a.totalAmount,addItem:function(e){r({type:"ADD",item:e})},removeItem:function(e){r({type:"REMOVE",id:e})}};return Object(b.jsx)(me.Provider,{value:c,children:e.children})},fe=n(29),pe=n.n(fe);var xe=function(e){return Object(b.jsx)(oe,{children:Object(b.jsxs)("div",{className:pe.a.orderAction,children:[Object(b.jsx)("h2",{className:pe.a.orderheading,children:"Order Placed!"}),Object(b.jsx)("button",{className:pe.a["button--alt"],onClick:e.onHideOrder,children:"Close"})]})})};var he=function(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(!1),c=Object(i.a)(r,2),s=c[0],u=c[1];return Object(b.jsxs)(Oe,{children:[n&&Object(b.jsx)(le,{onHideCart:function(){a(!1)},onShowOrder:function(){u(!0)}}),s&&Object(b.jsx)(xe,{onHideOrder:function(){u(!1)}}),Object(b.jsx)(x,{onShowCart:function(){a(!0)}}),Object(b.jsx)("main",{children:Object(b.jsx)(K,{})})]})},_e=n(13),ve=n(54),Ce=n(21),Ie=n(55),Ae=n.n(Ie),ye=Object(_e.a)().mark(ge),He=Object(_e.a)().mark(we),Ne=function(){var e=Object(ve.a)(Object(_e.a)().mark((function e(t){var n,a,r;return Object(_e.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=t.method,r=t.data,e.next=3,Ae()({url:n,method:a,data:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ge(){var e;return Object(_e.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ce.a)((function(){return Ne({url:"http://localhost:4000/items"})}));case 3:return e=t.sent,t.next=6,Object(Ce.b)(N(e.data));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(Ce.b)({type:"TODO_FETCH_FAILED"});case 12:case"end":return t.stop()}}),ye,null,[[0,8]])}function we(){return Object(_e.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ce.c)($,ge);case 2:case"end":return e.stop()}}),He)}var ke=we,Re=n(56),Fe=Object(Re.a)(),Me=Object(A.a)({reducer:{cartReducer:k},middleware:function(){return[Fe]}});Fe.run(ke);var Se=Me;r.a.createRoot(document.getElementById("root")).render(Object(b.jsx)(c.a,{store:Se,children:Object(b.jsx)(he,{})}))}},[[92,1,2]]]);
//# sourceMappingURL=main.004fed15.chunk.js.map