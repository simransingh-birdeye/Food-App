{"ast":null,"code":"import _slicedToArray from\"/Users/simransingh/Downloads/React Practice/food app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/simransingh/Downloads/React Practice/food app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/simransingh/Downloads/React Practice/food app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useReducer}from\"react\";import CartContext from\"./cart-context\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={items:[],totalAmount:0};var cartReducer=function cartReducer(state,action){if(action.type==='ADD'){// const updatedItems = state.items.concat(action.item);\nvar existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.item.id;});var existingCartItem=state.items[existingCartItemIndex];var updatedItems;if(existingCartItem){var updatedItem=_objectSpread(_objectSpread({},existingCartItem),{},{amount:existingCartItem.amount+action.item.amount});updatedItems=_toConsumableArray(state.items);updatedItems[existingCartItemIndex]=updatedItem;}else{updatedItems=state.items.concat(action.item);}var updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;return{items:updatedItems,totalAmount:updatedTotalAmount};}if(action.type==='REMOVE'){var _existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var existingItem=state.items[_existingCartItemIndex];var _updatedTotalAmount=state.totalAmount-existingItem.price;var _updatedItems;if(existingItem.amount===1){_updatedItems=state.items.filter(function(item){return item.id!==action.id;});}else{var _updatedItem=_objectSpread(_objectSpread({},existingItem),{},{amount:existingItem.amount-1});_updatedItems=_toConsumableArray(state.items);_updatedItems[_existingCartItemIndex]=_updatedItem;}return{items:_updatedItems,totalAmount:_updatedTotalAmount};}return defaultCartState;};function CartProvider(props){var _useReducer=useReducer(cartReducer,defaultCartState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCartAction=_useReducer2[1];var addItemToCartHandler=function addItemToCartHandler(item){dispatchCartAction({type:'ADD',item:item});};var removeItemFromCartHandler=function removeItemFromCartHandler(id){dispatchCartAction({type:'REMOVE',id:id});};var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemToCartHandler,removeItem:removeItemFromCartHandler};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});}export default CartProvider;","map":{"version":3,"names":["useReducer","CartContext","defaultCartState","items","totalAmount","cartReducer","state","action","type","existingCartItemIndex","findIndex","item","id","existingCartItem","updatedItems","updatedItem","amount","concat","updatedTotalAmount","price","existingItem","filter","CartProvider","props","cartState","dispatchCartAction","addItemToCartHandler","removeItemFromCartHandler","cartContext","addItem","removeItem","children"],"sources":["/Users/simransingh/Downloads/React Practice/food app/src/store/CartProvider.js"],"sourcesContent":["import { useReducer } from \"react\";\nimport CartContext from \"./cart-context\"\n\nconst defaultCartState = {\n    items: [],\n    totalAmount : 0\n}\n\nconst cartReducer = (state,action) =>{\n    if(action.type === 'ADD'){\n        // const updatedItems = state.items.concat(action.item);\n        const existingCartItemIndex = state.items.findIndex((item)=>item.id === action.item.id);\n        const existingCartItem = state.items[existingCartItemIndex];\n        let updatedItems;\n        if(existingCartItem){\n            let updatedItem = {\n                ...existingCartItem,amount:existingCartItem.amount+action.item.amount\n            }\n            updatedItems = [...state.items];\n            updatedItems[existingCartItemIndex] = updatedItem;\n        }else{\n            updatedItems = state.items.concat(action.item);\n        }\n        const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n        return {items: updatedItems,\n            totalAmount : updatedTotalAmount}\n    }\n    if(action.type === 'REMOVE'){\n        const existingCartItemIndex = state.items.findIndex(item=>item.id === action.id)\n        const existingItem = state.items[existingCartItemIndex];\n        const updatedTotalAmount = state.totalAmount - existingItem.price;\n        let updatedItems;\n        if(existingItem.amount === 1){\n            updatedItems = state.items.filter(item => item.id !== action.id);\n        }else{\n            const updatedItem = {...existingItem, amount:existingItem.amount-1};\n            updatedItems = [...state.items];\n            updatedItems[existingCartItemIndex] = updatedItem;\n        }\n        return {items : updatedItems,totalAmount:updatedTotalAmount}\n    }\n    return defaultCartState;\n}\n\nfunction CartProvider(props) {\n\n    const [cartState, dispatchCartAction] = useReducer(cartReducer,defaultCartState);\n\n    const addItemToCartHandler = (item) =>{\n        dispatchCartAction({type:'ADD',item:item});\n    };\n\n    const removeItemFromCartHandler = (id) =>{\n        dispatchCartAction({type:'REMOVE',id:id});\n    };\n\n    const cartContext = {\n        items:cartState.items,\n        totalAmount :cartState.totalAmount,\n        addItem : addItemToCartHandler,\n        removeItem :removeItemFromCartHandler\n    }\n\n  return (\n    <CartContext.Provider value={cartContext}>\n        {props.children}\n    </CartContext.Provider>\n  )\n}\n\nexport default CartProvider"],"mappings":"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"},"metadata":{},"sourceType":"module"}